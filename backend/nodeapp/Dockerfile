FROM node:22

ARG NODEAPP_PORT
ARG PG_HOST
ARG PG_PORT
ARG PG_USER
ARG PG_PASS
ARG PG_DB

ENV PORT $NODEAPP_PORT
ENV PG_HOST $PG_HOST
ENV PG_PORT $PG_PORT
ENV PG_USER $PG_USER
ENV PG_PASS $PG_PASS
ENV PG_DB $PG_DB

WORKDIR /usr/src/app

COPY package*.json ./

RUN yarn

COPY . .

EXPOSE $PORT
CMD [ "node", "app.js" ]
